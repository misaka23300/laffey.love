# stc15单片机I/O口

具体见数据手册第四章。第324页。



## 准双向口

### 输出

准双向口输出类型可用作输出和输入功能而不需重新配置口线输出状态。

**这是因为当口线输出为1时驱动能力很弱，允许外部装置将其拉低。**

**当引脚输出为低时，它的驱动能力很强， 可吸收相当大的电流**。准双向口有3个上拉晶体管适应不同的需要。 

在3个上拉晶体管中，

- 有1个上拉晶体管称为“弱上拉”，

​	当口线寄存器为1且引脚本身也为1时打开。此上拉提供基本驱动电流使准双向口输出为1。

​	如果一个引脚输出为1而由**外部装置下拉到低时**，弱上拉关闭而“极弱上拉”维持开状态，

​	为了把这个引脚强拉低，外部装置必须有足够的灌电流能力使引脚上的电压降到门槛电压以下。

​	对于5V单片机，“弱上拉”晶体管的电流约250uA；对于3.3V单片机，“弱上拉”晶体管的电流约150uA。 

- 第2个上拉晶体管，称为“极弱上拉”，当口线锁存为1时打开。

​	当引脚悬空时，这个极弱的上拉源产生很弱的上拉电流将引脚上拉为高电平。

​	对于5V单片机，“极弱上拉”晶体管的电 流约18uA；

​	对于3.3V单片机，“极弱上拉”晶体管的电流约5uA。 

- 第3个上拉晶体管称为“强上拉”。

​	**当口线锁存器由0到1跳变时，这个上拉用来加快准双向口由逻辑0到逻辑1转换。**

​	当发生这种情况时，强上拉打开约2个时钟以使引脚能够迅速地上拉到高电平。 

![QQ_1768922392639](./stc15%E5%BC%95%E8%84%9A%E7%BB%93%E6%9E%84.assets/QQ_1768922392639.png)

### 输入

准双向口读外部状态前,要先锁存为 ‘1’,才可读到外部正确的状态

## 推挽输出

![QQ_1768923434735](./stc15%E5%BC%95%E8%84%9A%E7%BB%93%E6%9E%84.assets/QQ_1768923434735.png)

当输出配置为高电平时，比准双向口有更强的驱动能力。

## 开漏输出

![QQ_1768923506074](./stc15%E5%BC%95%E8%84%9A%E7%BB%93%E6%9E%84.assets/QQ_1768923506074.png)

当GPIO为高阻态时,VCC通过电阻到输出,输出高电平.
当GPIO为低电平时,输出为低电平.